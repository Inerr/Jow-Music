import chalk from "chalk";
import { existsSync } from "fs";
import { join } from "path";

export const include = <T>(module: string): T => {
	const modulePath = join(
		process.cwd(),
		"hammer_modules",
		module,
		"hammer",
		"main.js",
	);
	if (existsSync(modulePath)) return require(modulePath);

	throw new Error(
		`Module ${chalk.yellow(
			module,
		)} not found. Install it with ${chalk.green(
			`hammer install ${module}`,
		)}`,
	);
};
